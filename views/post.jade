extend layout
block content
  if question
    div.container
      include question.jade
      if submissions
        | #{submissions.length} answers
      else
        Nobody has submitted an answer.
  hr

  if submissions
    div.container
      each submission, k in submissions
        table.table-condensed
          tr.row
            td(width="1%")
            td(width="3%"): h3.votes.float-left #{submission.upvotes - submission.downvotes}
            td(width="4%")
              img.thumbsup.center(src=(submission.vote == 1 ? "/img/thumbs-up-good.png" : "/img/thumbs-up.png") height='30' width='30' style='margin-top:13px', onclick=(user ? 'toggleSubmissionUp($(this).parent(), #{submission.submission_id})' : ''))
              img.thumbsdown.center(src=(submission.vote == -1 ? "/img/thumbs-down-bad.png" : "/img/thumbs-down.png") height='30' width='30' style='margin:auto', onclick=(user ? 'toggleSubmissionDown($(this).parent(), #{submission.submission_id})' : ''))
            td(width="94%")
              h2 #{submission.language} solution that took #{submission.time_taken} milliseconds
              h5 posted by #{submission.username}        
              | #{submission.message}

        if submission.errors
          pre.prettyprint
            code #{submission.errors}
            br
        ul.nav.nav-tabs
          each newclass, i in submission.classes
            li
              a(href='#class' + k + '-' + i, data-toggle='tab') #{newclass.name}
        .tab-content
          each newclass, j in submission.classes
            div(class='tab-pane' id='class' + k + '-' + j)
              pre.prettyprint
                code
                  | #{newclass.code}
          
        br
        br
  if user
    div.container
      if submissions.length > 0
        hr
          
      h1 Ready to post your solution?
      form.form-horizontal(method="post" action="/submitSolution" novalidate)
        input(type="hidden" name="problemId" value="#{question.question_id}")
        input(type="hidden" id="classes" name="numClasses" value="1");
        input(type="hidden" id="lang" name="language" value="java");
        div.modal-body
          // Message
          div.control-group
            label.control-label( for="response") Response
            .controls
            textarea#response(class="form-control" name="message" placeholder="Explain your algorithm in plain english." rows="5" cols="150" required)
            br
          // Solution
          div.control-group
            label.control-label(for="solution") Solution
            div#languageSelector.btn-group
              button#javaSelector.btn.btn-default(type="button") Java
              button#pythonSelector.btn.btn-default(type="button") Python
          ul#response_tabs.nav.nav-tabs
            li.active
              a(href='#0', data-toggle='tab')
                input.form-control(name="file-0" value="Main");
            li
              a(id="addClass") +
          #content.tab-content
            #0.tab-pane.active
              textarea#sol-0.solution(class="form-control" name="0" required)
              div.editor(id="editor0" class="form-control")
                |import java.util.*;
                | 
                |public class Main {
                |     public static void main(String[] args){
                |        // code away!
                |     }
                |}
            .controls
              script(src="/js/ace-min/ace.js" type="text/javascript" charset="utf-8")
              script(src="/js/ace-min/mode-java.js" type="text/javascript" charset="utf-8")
              script(src="/js/ace-min/mode-python.js" type="text/javascript" charset="utf-8")
              script(src="/js/ace-min/theme-eclipse.js" type="text/javascript" charset="utf-8")
          // Footer
          div.modal-footer
            .form-actions
              button#submit(type="submit" class="btn btn-primary") Submit
                i(class="icon-ok icon-white")

  script(src="/js/post.js" type="text/javascript" charset="utf-8")