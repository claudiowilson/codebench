extend layout
block hero
  .jumbotron#intro: header: .container
    h1.text-shadowed Welcome to CodeBench.
    h3 We benchmark your code so you know how you stack up against others.

block content

  h2 > Put your code to the test.
  br
  ul.nav.nav-tabs
    li.active: a(href='#1', data-toggle='tab') Top Questions
    li: a(href='#2', data-toggle='tab') Newest 
  
  #content.tab-content
    #1.tab-pane.active
      if questions
        .container
          each question, i in questions
            .row(class=(i % 2 == 0) ? 'light-row' : 'dark-row')
              .col-md-1
                h3.float-left #{question.upvotes - question.downvotes}
                img.center(src="/thumbs-up.png" height='30' width='30' style='margin-top:13px' onclick='toggleUp(this, #{question.question_id});')
                img.center(src="/thumbs-down.png" height='30' width='30' style='margin:auto' onclick='toggleDown(this, #{question.question_id});')
              .col-md-11
                h3: a(href="/problem/#{question.question_id}") #{question.title}
                h5 Submitted by #{question.username}

    script.
      var toggleUp = function(thumb, qid) {
        parent = $(thumb).parent();
        imagepath = $(thumb).attr('src');
        votes = $(parent).children('h3')[0];
        if (imagepath == '/thumbs-up.png') {
          otherThumb = $(parent).children('img')[1];
          if ($(otherThumb).attr('src') == '/thumbs-down-bad.png') {
            $(otherThumb).attr('src', '/thumbs-down.png');
            $(votes).text(parseInt($(votes).text()) + 1);
          }
          $(thumb).attr('src', '/thumbs-up-good.png');
          $(votes).text(parseInt($(votes).text()) + 1);
          
        } else {
          $(thumb).attr('src', '/thumbs-up.png');
          $(votes).text(parseInt($(votes).text()) - 1);
        }
      }
      var toggleDown = function(thumb, qid) {
        parent = $(thumb).parent();
        imagepath = $(thumb).attr('src');
        votes = $(parent).children('h3')[0];
        if (imagepath == '/thumbs-down.png') {
          otherThumb = $(parent).children('img')[0];
          if ($(otherThumb).attr('src') == '/thumbs-up-good.png') {
            $(otherThumb).attr('src', '/thumbs-up.png');
            $(votes).text(parseInt($(votes).text()) - 1);
          }
          $(thumb).attr('src', '/thumbs-down-bad.png');
          $(votes).text(parseInt($(votes).text()) - 1);
        } else {
          $(thumb).attr('src', '/thumbs-down.png');
          $(votes).text(parseInt($(votes).text()) + 1);
        }
      }

    #2.tab-pane
      if questions
        .container
          each question, i in questions
            .row(class=(i % 2 == 0) ? 'light-row' : 'dark-row')
              .col-md-1
                h3.float-left #{question.upvotes - question.downvotes}
                img.center(src="/thumbs-up.png" height='30' width='30' style='margin-top:13px' onclick='toggleUp(this, #{question.question_id});')
                img.center(src="/thumbs-down.png" height='30' width='30' style='margin:auto' onclick='toggleDown(this, #{question.question_id});')
              .col-md-11
                h3: a(href="/problem/#{question.question_id}") #{question.title}
                h5 Submitted by #{question.username}